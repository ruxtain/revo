{% load static %}
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="{% static 'core/css/style.css' %}" />
    <script type="text/javascript" src="{% static 'core/js/vue.js' %}"></script>
    <title>REVO</title>
</head>
<body>
<nav>
    <a href="{% url 'home' %}">home</a>
    <a class="active_link" href="{% url 'secret' %}">secret</a>
</nav>
</body>
    <div id="app">
        <input type="text" v-model="pubkey">
        <br/>
        <textarea id="input-box" type="textarea" v-model="s0" @input="m_encrypt"></textarea>

        <textarea id="input-box" type="textarea" v-model="s1" @input="m_decrypt"></textarea>
    </div>
</body>
<script type="text/javascript">

// > String.fromCharCode(20320)
// '你'
// > '你'.charCodeAt(0)

function encrypt(s, pubkey) {
    if (pubkey > 10000) {
        pubkey = 10000;
    }
    var result = new Array();
    var c;
    for(var i=0, len=s.length; i<len; i++) {
        c = s.charCodeAt(i) + pubkey;
        result[i] = String.fromCharCode(c);
    }
    return result.join("");
}

function decrypt(s, pubkey) {
    if (pubkey > 10000) {
        pubkey = 10000;
    }
    var result = new Array();
    var c;
    for(var i=0, len=s.length; i<len; i++) {
        c = s.charCodeAt(i) - pubkey;
        result[i] = String.fromCharCode(c);
    }
    return result.join("");
}

var app = new Vue({
    delimiters: ['[[', ']]'],
    el: '#app',
    data: {
        s0: '',
        s1: '',
        pubkey: 42,
    },
    methods: {
        m_encrypt() {
            this.s1 = encrypt(this.s0, this.pubkey);
        },
        m_decrypt() {
            this.s0 = decrypt(this.s1, this.pubkey);
        },
    }
})
</script>
<style type="text/css">
#input-box {
    width: 300px;
    height: 300px;
    resize: none;
}
</style>
</html>
